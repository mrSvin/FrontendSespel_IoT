<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Title</title>
</head>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/sankey.js"></script>
<script src="https://code.highcharts.com/modules/organization.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<figure class="highcharts-figure">
    <div id="container"></div>
</figure>
<script th:inline="javascript">
    Highcharts.chart('container', {
        chart: {
            height: 600,
            inverted: true
        },
        credits: {
            enabled: false
        },
        title: {
            text: 'Персонал относящийся к оборудованию'
        },

        accessibility: {
            point: {
                descriptionFormatter: function (point) {
                    var nodeName = point.toNode.name,
                        nodeId = point.toNode.id,
                        nodeDesc = nodeName === nodeId ? nodeName : nodeName + ', ' + nodeId,
                        parentDesc = point.fromNode.id;
                    return point.index + '. ' + nodeDesc + ', reports to ' + parentDesc + '.';
                }
            }
        },

        series: [{
            type: 'organization',
            name: 'Сеспель',
            keys: ['from', 'to'],
            data: [
                ['CEO', 'CTO'],
                ['CEO', 'master'],
                ['CEO', 'tehnolog1'],
                ['CEO', 'inventar'],
                ['CEO', 'ssp'],
                ['master', 'rab1'],
                ['master', 'rab2'],
                ['master', 'rab3'],
                ['master', 'rab4'],
                ['master', 'rab5'],
                ['master', 'rab6'],
                ['master', 'rab7'],
                ['master', 'rab8'],

            ],
            levels: [ {
                level: 0,
                color: '#980104'
            }, {
                level: 4,
                color: '#359154'
            }],
            nodes: [{
                id: 'CEO',
                title: 'Склад',
                name: 'Склад Механического участка',
                image: "/images/sklad.png"
            },
                {
                    id: 'CTO',
                    title: 'Система мониторинга' +'<br/>' + 'Контакт: -',
                    name: 'Васильев Алексей Владимирович',
                    image: 'https://cdn-ru.bitrix24.ru/b122591/resize_cache/2343701/23365dd92c1f65a6eb81283cfddb6812/main/3ac/3ac19c973311b5586fc63bef816f31c9/Vasilev+Aleksey+Vladimirovich.JPG'
                }, {
                    id: 'master',
                    title: 'Мастер' +'<br/>' + 'Контакт: -',
                    name: 'Филиппов Дмитрий Леонидович',
                    image: 'https://cdn-ru.bitrix24.ru/b122591/resize_cache/325979/23365dd92c1f65a6eb81283cfddb6812/main/218/21828804359557686c614dc92cee9137/Filippov+Dmitriy+Leonidovich.jpg'
                }, {
                    id: 'tehnolog1',
                    title: 'ПДО' +'<br/>' + 'Контакт: -',
                    name: 'Григорьев Сергей Станиславович',
                    image: 'https://cdn-ru.bitrix24.ru/b122591/resize_cache/6922308/23365dd92c1f65a6eb81283cfddb6812/main/a71/a71475b66788a33d6f40a623ee010e0d/Grigorev+Sergey+Stanislavovich.jpg'
                }, {
                    id: 'ssp',
                    title: 'ССП' +'<br/>' + 'Контакт: -',
                    name: 'Устинов Илья Валерьевич',
                    image: 'https://bitrix2.cdnvideo.ru/b122591/resize_cache/6899496/23365dd92c1f65a6eb81283cfddb6812/main/c09/c09da2513c66e6100af3d624b8c4ee89/IMG_20190702_114355.jpg'
                },{
                    id: 'inventar',
                    title: 'Учет материалов' +'<br/>' + 'Контакт: -',
                    name: 'Фадеева Наталья Николаевна',
                    image: 'https://cdn-ru.bitrix24.ru/b122591/resize_cache/2519369/23365dd92c1f65a6eb81283cfddb6812/main/c22/c22ee77b965fd2965c3c9f3ebf90d5ab/Fadeeva+Natalya+Nikolaevna.jpg'
                },{
                    id: 'rab1',
                    title: 'Слесарь МСР' +'<br/>' + 'Табельный: 260',
                    name: 'Данилов Евгений Васильевич',
                },{
                    id: 'rab2',
                    title: 'Оператор' +'<br/>' + 'Табельный: 265',
                    name: 'Ефимов Михаил Георгиевич',
                },{
                    id: 'rab3',
                    title: 'Слесарь МСР' +'<br/>' + 'Табельный: 302',
                    name: 'Иваков Петр Порфирьевич',
                },{
                    id: 'rab4',
                    title: 'Токарь' +'<br/>' + 'Табельный: 1462',
                    name: 'Литий Виталий Анатольевич',
                },{
                    id: 'rab5',
                    title: 'Оператор ЧПУ' +'<br/>' + 'Табельный: 1265',
                    name: 'Малинов Александр Зинионович',
                },{
                    id: 'rab6',
                    title: 'Оператор ЧПУ' +'<br/>' + 'Табельный: 1242',
                    name: 'Мясников Алексей Валерьянович',
                },{
                    id: 'rab7',
                    title: 'Слесарь МСР' +'<br/>' + 'Табельный: 875',
                    name: 'Смирнов Алексей Николаевич',
                },{
                    id: 'rab8',
                    title: 'Оператор ЧПУ' +'<br/>' + 'Табельный: 980',
                    name: 'Суворов Александр Юрьевич',
                },

                {
                    id: 'Product',
                    name: 'Product developers'
                }, {
                    id: 'Web',
                    name: 'Web devs, sys admin'
                }, {
                    id: 'Sales',
                    name: 'Sales team'
                }, {
                    id: 'Market',
                    name: 'Marketing team',
                    column: 5
                }],
            colorByPoint: false,
            color: '#007ad0',
            dataLabels: {
                color: 'white'
            },
            borderColor: 'white',
            nodeWidth: 90
        }],
        tooltip: {
            outside: true
        },
        exporting: {
            allowHTML: true,
            sourceWidth: 800,
            sourceHeight: 600
        }

    });
</script>

</html>